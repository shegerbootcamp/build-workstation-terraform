#cloud-config
users:
  - default
  - name: ${USERNAME}
    gecos: ${USERNAME}
    shell: /bin/bash
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: wheel
    lock_passwd: false
    ssh-authorized-keys:
      - ${PUBLIC_KEY_CONTENT}
write_files:
  - path: /run/scripts/test-script.sh
    content: |
      #!/bin/bash

      echo 'Script executed successfully!' >> /run/testing.txt      
    permissions: '0755'

runcmd:
  - [ sh, "/run/scripts/test-script.sh" ]